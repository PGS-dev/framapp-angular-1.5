<div class="ProductEdit" layout="column" ng-cloak>
    <md-content ng-class="{pullleft: $ctrl.$mdMedia('gt-sm')}"
                class="pgs-mainContent" layout-padding>
        <div layout="row" layout-align="center">
            <md-content flex="33" layout-padding>
                <form name="updateProduct" ng-submit="$ctrl.submit($ctrl.productData)">

                    <md-input-container class="md-block">
                        <md-switch ng-model="$ctrl.productData.promoted"
                                   name="productPromoted">
                            Product promoted: {{$ctrl.productData.promoted ? "yes" : "no"}}
                        </md-switch>
                    </md-input-container>

                    <md-input-container class="md-block">
                        <label>Product name</label>
                        <input type="text"
                               name="productTitle"
                               ng-model="$ctrl.productData.title"
                               ng-maxlength="30"
                               ng-value="$ctrl.productData.title" required>
                        <div ng-messages="updateProduct.productTitle.$error"
                             ng-if="updateProduct.productTitle.$invalid && !updateProduct.productTitle.$pristine">
                            <div ng-message="required">This field is required.</div>
                            <div ng-message="maxlength">The given expression is too long.</div>
                        </div>
                    </md-input-container>

                    <md-input-container class="md-block">
                        <label>Product category</label>
                        <md-select name="productCategory"
                                   ng-model="$ctrl.productData.category">
                            <md-option ng-repeat="(productCategoryKey, productCategoryData) in $ctrl.categoriesData"
                                       ng-value="productCategoryKey"
                                       ng-selected="{{ productCategoryKey === $ctrl.productData.category ? 'true' : 'false' }}">
                                {{productCategoryData.title}}
                            </md-option>
                        </md-select>
                    </md-input-container>

                    <md-input-container class="md-block">
                        <label>Price (USD)</label>
                        <input type="number"
                               step="any"
                               name="productPrice"
                               ng-model="$ctrl.productData.price"
                               min="1"
                               max="10000"
                               ng-value="$ctrl.productData.price" required>
                        <div ng-messages="updateProduct.productPrice.$error">
                            <div ng-message="required">
                                This field is required.
                            </div>
                            <div ng-message="min">
                                Minimum price must be more then 0.
                            </div>
                            <div ng-message="max">
                                Maximum price must be less then 10 000.
                            </div>
                        </div>
                    </md-input-container>

                    <md-input-container class="md-block">
                        <label>Image URL</label>
                        <input type="url"
                               name="productImageUrl"
                               ng-model="$ctrl.productData.imageUrl"
                               ng-minlength="5"
                               ng-maxlength="255"
                               ng-value="$ctrl.productData.imageUrl" required>
                        <div ng-messages="updateProduct.productImageUrl.$error">
                            <div ng-message="required">
                                This field is required.
                            </div>
                            <div ng-message="minlength">
                                The given expression is too short.
                            </div>
                            <div ng-message="url">
                                The given expression is not link.
                            </div>
                            <div ng-message="maxlength">
                                The given expression is too long.
                            </div>
                        </div>
                    </md-input-container>

                    <md-input-container class="md-block">
                        <label>Amount</label>
                        <input type="number"
                               step="any"
                               name="productAmount"
                               ng-model="$ctrl.productData.amount"
                               min="0"
                               max="10000"
                               ng-value="$ctrl.productData.amount" required>
                        <div ng-messages="updateProduct.productPrice.$error">
                            <div ng-message="required">
                                This field is required.
                            </div>
                            <div ng-message="min">
                                Minimum amount must be more then 0.
                            </div>
                            <div ng-message="max">
                                Maximum amount must be less then 10 000.
                            </div>
                        </div>
                    </md-input-container>

                    <md-input-container class="md-block">
                        <label>Description</label>
                        <textarea name="productDescription"
                                  ng-model="$ctrl.productData.description"
                                  md-maxlength="1000"
                                  rows="5"
                                  ng-value="$ctrl.productData.description" required>
                        </textarea>
                        <div ng-messages="updateProduct.productDescription.$error"
                             ng-if="updateProduct.productDescription.$invalid && !updateProduct.productDescription.$pristine">
                            <div ng-message="required">This field is required</div>
                            <div ng-message="maxlength">The given expression is too long</div>
                        </div>
                    </md-input-container>
                    <md-button type="submit"
                               class="md-default md-raised"
                               ui-sref="app.products">
                        Cancel
                    </md-button>
                    <md-button type="submit"
                               class="md-primary md-raised"
                               ng-disabled="!updateProduct.$valid"
                               ng-click="$ctrl.updateProduct($ctrl.productData)"
                               ui-sref="app.products">
                        Update product
                    </md-button>
                </form>
            </md-content>
        </div>
        <div flex></div>
    </md-content>
</div>
